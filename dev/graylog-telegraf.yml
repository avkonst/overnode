
version: "3.7"
services:
    graylog-telegraf:
        container_name: graylog-telegraf
        hostname: graylog-telegraf-${OVERNODE_ID}.weave.local
        network_mode: bridge
        dns: ${OVERNODE_BRIDGE_IP}
        init: true
        image:  telegraf:alpine
        ports:
            - 127.0.0.1:6514:6514/udp
        environment:
            HOST_PROC: /host/proc
        volumes:
            - ${OVERNODE_ETC}/graylog-telegraf.conf:/etc/telegraf/telegraf.conf:ro
            - /var/run/docker.sock:/var/run/docker.sock
            - /proc:/host/proc:ro
        restart: always
