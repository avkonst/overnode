version: '3.7'
services:
    zookeeper:
        container_name: zookeeper
        hostname: zookeeper.overnode.local
        init: true
        image: ubuntu:16.04
        deploy:
            resources:
                limits:
                    cpus: "0.2"
        environment:
            WEAVE_CIDR: 10.32.1.${OVERNODE_ID}/12
            NODE_ID: ${OVERNODE_ID}
            # CONTAINER_IP: 10.32.0.1.1
            # CONTAINER_NAME: {SERVICE_NAME}
            # CONTAINER_ID: {CONTAINER_ID}
            # OVERNODE_ID: {OVERNODE_ID}
            # SERVICE_NAME: zookeeper.cade.local
            DOCKER_NODE_ID: "{{.Node.ID}}"
            DOCKER_NODE_HOSTNAME: "{{.Node.Hostname}}"
        volumes:
            - /projects/dev/service1-entrypoint.sh:/service1-entrypoint.sh
            - ${OVERNODE_VOLUME}:/overnode-volume
            # - /data/zookeeper/data:/data
            # - /usr/bin/docker:/docker
            # - /var/run/docker.sock:/var/run/docker.sock
        entrypoint: bash /service1-entrypoint.sh aa
        restart: always
        network_mode: bridge